on:
  pull_request_target:  # Instead of pull_request
    types: [opened, reopened]

jobs:
  comment-only:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Comment on fork PR
        if: ${{ github.event.pull_request.head.repo.full_name != github.repository }}
        uses: actions/github-script@v7
        with:
          script: |
            const comment = `ðŸ‘‹ **Thank you for your contribution!**

            This PR is from a fork, so the Docker image was not automatically pushed to Docker Hub.

            **For maintainers:** After reviewing and approving this PR, you can manually build and push a Docker image using the \`Push Fork PR Docker Image\` workflow:
            1. Go to the [Actions tab](https://github.com/${{ github.repository }}/actions/workflows/push-fork-pr-image.yml)
            2. Click "Run workflow"
            3. Enter the PR number: **${{ github.event.number }}**
            4. The workflow will build and push the image after verifying authorization (requires either the \`ok-to-push-image\` label or an approved review)`;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: comment
            });
